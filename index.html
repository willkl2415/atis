<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ATIS ‚Äì Lesson Feedback Coach</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f8f8;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      font-size: 28px;
      margin-bottom: 30px;
    }

    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
    }

    select, textarea {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    textarea {
      height: 120px;
    }

    button {
      display: block;
      width: 100%;
      padding: 12px;
      margin-top: 20px;
      font-size: 16px;
      background-color: #3b61d1;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background-color: #2c4bb7;
    }

    #response {
      margin-top: 25px;
      padding: 15px;
      background-color: #e6f0ff;
      border-left: 6px solid #3b61d1;
      border-radius: 4px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h1>ATIS ‚Äì Lesson Feedback Coach</h1>

  <label for="sector">Select Industry Sector:</label>
  <select id="sector" onchange="updateRoles()">
    <option value="Education">Education</option>
    <option value="Training">Training</option>
    <option value="Defence (Training)">Defence (Training)</option>
    <option value="Healthcare">Healthcare</option>
    <option value="Engineering">Engineering</option>
    <option value="Retail">Retail</option>
    <option value="Technology">Technology</option>
  </select>

  <label for="role">Select Role:</label>
  <select id="role">
    <!-- Options will be populated dynamically -->
  </select>

  <label for="situation">Describe a recent session or situation in your role. What happened? What did you say or do?</label>
  <textarea id="situation" placeholder="Describe your experience here..."></textarea>

  <button onclick="getFeedback()">Get Feedback</button>

  <div id="response"></div>

  <script>
    const sectorRoleMap = {
      "Education": ["New Teacher", "Senior Leader", "Teaching Assistant"],
      "Training": ["Instructional Designer", "Trainer", "Learning Technologist"],
      "Defence (Training)": ["Training Analyst", "Training Designer", "Content Developer"],
      "Healthcare": ["Nurse Educator", "Junior Doctor", "Clinical Supervisor"],
      "Engineering": ["Process Engineer", "Systems Designer", "Compliance Lead"],
      "Retail": ["Floor Manager", "Customer Advisor", "Store Trainer"],
      "Technology": ["Product Manager", "UX Researcher", "Onboarding Lead"]
    };

    function updateRoles() {
      const sector = document.getElementById("sector").value;
      const roleSelect = document.getElementById("role");
      roleSelect.innerHTML = "";

      sectorRoleMap[sector].forEach(role => {
        const option = document.createElement("option");
        option.value = role;
        option.textContent = role;
        roleSelect.appendChild(option);
      });
    }

    function getFeedback() {
      const sector = document.getElementById("sector").value;
      const role = document.getElementById("role").value;
      const situation = document.getElementById("situation").value.trim();

      let responseText = "";

      // Simplified logic ‚Äî real engine will be replaced with smarter context engine
      if (!situation) {
        responseText = "Please describe your session before requesting feedback.";
      } else if (situation.includes("swore") || situation.includes("lost control")) {
        responseText = `
        üî¥ A serious classroom incident was reported involving loss of control. While emotional responses are human, swearing or losing composure in front of students breaks professional boundaries.

        You've already taken the first step by recognising the issue. Reflect on what led to that moment and consider:
        - Speaking with your line manager or safeguarding lead
        - Using classroom management resets like silence, proximity, or structured pauses
        - Offering an apology to rebuild trust if appropriate

        Taking responsibility and seeking help is a sign of strength. Would you like to simulate this again with a better outcome?`;
      } else if (situation.includes("shouted") || situation.includes("frustrated")) {
        responseText = `
        üü† You experienced frustration or a loss of calm. This is common, especially under pressure. Try using grounding techniques or classroom resets like ‚ÄòLet‚Äôs pause here for a moment.‚Äô

        Would you like to simulate a version where you remain calm and composed?`;
      } else if (situation.includes("no response") || situation.includes("blank stares")) {
        responseText = `
        üü° Students may not have understood the question or felt confident. Consider modelling the answer first or breaking it into parts. Engagement doesn‚Äôt always mean noise ‚Äî silence can be thinking too.`;
      } else {
        responseText = `
        üü¢ Thank you for sharing. Your experience shows reflection and awareness. Would you like feedback on how to extend or challenge this situation further?`;
      }

      document.getElementById("response").innerHTML = `
        <p>üèÖ <strong>Selected Sector:</strong> ${sector}</p>
        <p>üë®‚Äçüè´ <strong>Selected Role:</strong> ${role}</p>
        <p>${responseText}</p>
      `;
    }

    // Trigger default on page load
    window.onload = updateRoles;
  </script>
</body>
</html>
