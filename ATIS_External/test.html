<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ATIS External Test</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #FFFF00;
      margin: 0;
      padding: 40px 0;
    }
    .container {
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
      text-align: left;
    }
    .intro {
      background-color: #ffffff;
      padding: 30px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-bottom: 40px;
    }
    .intro h1 {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 5px;
    }
    .strapline {
      font-style: italic;
      font-size: 16px;
      margin-bottom: 25px;
    }
    .intro p {
      font-size: 16px;
      margin-bottom: 18px;
    }
    .intro .closing-line {
      font-weight: bold;
      font-size: 18px;
      margin-top: 30px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 20px;
    }
    select, textarea {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      margin-top: 5px;
      border: 1px solid #bbb;
      border-radius: 6px;
      box-sizing: border-box;
    }
    button {
      margin-top: 20px;
      margin-bottom: 30px;
      padding: 12px 24px;
      font-size: 16px;
      background-color: #f1c40f;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background-color: #d4ac0d;
    }
    #response {
      background-color: #fffff0;
      border: 1px solid #ccc;
      padding: 24px;
      border-radius: 6px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>

<div class="container">

  <div class="intro">
    <h1>ATIS (Artificial Training Intelligence System)</h1>
    <div class="strapline">The Future of AI Human Performance Support Anytime, Anywhere</div>

    <p><strong>Welcome to ATIS — a simple concept with mind-blowing results.</strong></p>

    <p>You have a question about your work, a task, a decision, or something you're unsure about — and ATIS responds instantly with clear, helpful guidance. No setup, no jargon, no delay — just the answer you need, exactly when and where you need it.</p>

    <p>Whether you're travelling, preparing for something important, solving a problem on the spot, or double-checking a detail in the moment — ATIS is always ready.</p>

    <p>It's the pinnacle of in-the-moment performance support — helping you feel more confident, capable, and informed, wherever you are.</p>

    <p class="closing-line">
      ATIS isn’t just performance support — it’s the end of waiting for answers.
    </p>
  </div>

  <label for="sector">Sector</label>
  <select id="sector" onchange="populateFunctions()">
    <option value="Training and Learning & Development (L&D)">Training and Learning & Development (L&D)</option>
  </select>

  <label for="function">Function</label>
  <select id="function" onchange="populateRoles()">
    <option value="">Select a function</option>
  </select>

  <label for="role">Role</label>
  <select id="role">
    <option value="">Select a role</option>
  </select>

  <label for="prompt">Prompt</label>
  <textarea id="prompt" rows="5" placeholder="Write or copy and paste your question here"></textarea>

  <button onclick="submitPrompt()">Submit Prompt</button>

  <div id="response"></div>
</div>

<script>
  const roleData = {
    "Training and Learning & Development (L&D)": {
      "Leadership & Strategy": [
        "Chief Learning Officer (CLO)",
        "Director of Training and Development",
        "Vice President (VP) of Learning & Development",
        "Head of Learning & Development",
        "Learning and Development Manager",
        "Training Manager",
        "Director of Knowledge & Learning",
        "Talent Development Manager",
        "Training Program Manager",
        "Leadership Development Specialist"
      ],
      "Program Design & Development": [
        "Instructional Designer",
        "Senior Instructional Designer",
        "Instructional Design Manager",
        "Curriculum Designer",
        "Curriculum Manager",
        "Curriculum Consultant",
        "Content Developer",
        "Content Curator",
        "Digital Learning Designer",
        "eLearning Developer",
        "eLearning Manager",
        "Learning Architect",
        "Learning Strategist",
        "Learning Experience Designer",
        "Learning Technologist",
        "Instructional Technologist"
      ],
      "Training Delivery & Facilitation": [
        "Corporate Trainer",
        "Senior Trainer",
        "Training Facilitator",
        "Technical Trainer",
        "IT Trainer",
        "Sales Trainer",
        "Customer Service Trainer",
        "Onboarding Trainer",
        "Subject Matter Expert / Trainer",
        "Apprenticeship Trainer",
        "Training Instructor",
        "Learning Coach",
        "Employee Development Coach"
      ],
      "Coordination, Analysis & Support": [
        "Learning and Development Coordinator",
        "Training Coordinator",
        "L&D Administrator",
        "Training Assistant",
        "Learning & Development Assistant",
        "Learning Systems Coordinator",
        "LMS Administrator (Learning Management System)",
        "Learning & Development Analyst",
        "Workforce Development Coordinator",
        "L&D Project Coordinator",
        "Development Administrator",
        "Program Editor"
      ],
      "Specialist & Consulting Roles": [
        "Learning and Development Business Partner",
        "Learning and Development Consultant",
        "Organizational Development Specialist",
        "Performance Consultant",
        "Capability Consultant",
        "People Development Partner",
        "Culture and Engagement Consultant"
      ],
      "Emerging Roles & Niche Specialisms": [
        "Personal Learning Experience Designer",
        "Learning AI Specialist",
        "Hybrid L&D Facilitator",
        "Talent Development Specialist",
        "Digital Learning Transformation Lead",
        "Knowledge Manager",
        "Learning Product Owner",
        "Learning Operations Lead",
        "Skills Development Partner",
        "Competency Framework Specialist",
        "Digital Learning Experience Manager",
        "Learning Innovation Lead"
      ],
      "Entry-Level Roles": [
        "Training Administrator",
        "L&D Intern",
        "Junior Instructional Designer",
        "Assistant Trainer",
        "Training Support Officer",
        "Learning Delivery Assistant",
        "Junior L&D Consultant"
      ]
    }
  };

  function populateFunctions() {
    const sector = document.getElementById("sector").value;
    const functionDropdown = document.getElementById("function");
    const roleDropdown = document.getElementById("role");

    functionDropdown.innerHTML = '<option value="">Select a function</option>';
    roleDropdown.innerHTML = '<option value="">Select a role</option>';

    if (roleData[sector]) {
      for (const func in roleData[sector]) {
        const opt = document.createElement("option");
        opt.value = func;
        opt.textContent = func;
        functionDropdown.appendChild(opt);
      }
    }
  }

  function populateRoles() {
    const sector = document.getElementById("sector").value;
    const selectedFunction = document.getElementById("function").value;
    const roleDropdown = document.getElementById("role");

    roleDropdown.innerHTML = '<option value="">Select a role</option>';

    if (roleData[sector] && roleData[sector][selectedFunction]) {
      roleData[sector][selectedFunction].forEach(role => {
        const opt = document.createElement("option");
        opt.value = role;
        opt.textContent = role;
        roleDropdown.appendChild(opt);
      });
    }
  }

  async function submitPrompt() {
    const sector = document.getElementById("sector").value;
    const role = document.getElementById("role").value;
    const prompt = document.getElementById("prompt").value;
    const responseBox = document.getElementById("response");

    if (!sector || !role || !prompt) {
      responseBox.textContent = "Please fill in all fields before submitting.";
      return;
    }

    responseBox.textContent = "Thinking...";

    try {
      const res = await fetch("/generate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ sector, role, prompt })
      });

      const data = await res.json();
      const cleaned = (data.response || "").replaceAll("**", "");
      responseBox.textContent = cleaned || "No response received.";
    } catch (err) {
      responseBox.textContent = "Error: " + err.message;
    }
  }

  // auto-load on page
  window.onload = populateFunctions;
</script>

</body>
</html>
